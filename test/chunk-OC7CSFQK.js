import{A as a,Aa as F,Ba as D,D as O,E as l,F as P,H as w,I as b,K as C,L as f,M as o,N as i,O as x,P as T,Q as c,R as g,S as s,T as u,Y as z,c as M,i as m,k as v,o as h,p as _,q as S,ua as k,xa as E,y,za as A}from"./chunk-RKEND3FB.js";function I(n,p){if(n&1&&(o(0,"option",11),s(1),i()),n&2){let e=p.$implicit;l("value",e),a(),u(e)}}function L(n,p){if(n&1&&(o(0,"option",11),s(1),i()),n&2){let e=p.$implicit;l("value",e),a(),u(e)}}function V(n,p){if(n&1){let e=T();o(0,"div")(1,"label",9),s(2,"Select size:"),i(),o(3,"select",10),c("change",function(t){h(e);let d=g();return _(d.onSizeChange(t))}),C(4,I,2,2,"option",11,b),i()(),o(6,"div",12)(7,"label",13),s(8,"Select file type:"),i(),o(9,"select",14),c("change",function(t){h(e);let d=g();return _(d.onFileTypeChange(t))}),C(10,L,2,2,"option",11,b),i()()}if(n&2){let e=g();a(3),l("disabled",e.isSizeSelectDisabled())("ngbTooltip",e.isSizeSelectDisabled()?"Only this size is supported":""),a(),f(e.asset.supportedSizes),a(5),l("disabled",e.isFileTypeSelectDisabled())("ngbTooltip",e.isSizeSelectDisabled()?"Only this file type is supported":""),a(),f(e.asset.supportedFileTypes)}}var K=(()=>{class n{asset;close=new S;thumbnailWidth=30;selectedSize="";selectedFileType="";isLoading=!1;assetService=m(F);activeModal=m(k);errorService=m(A);ngOnInit(){this.asset&&(this.selectedSize=this.asset.supportedSizes[0]||"",this.selectedFileType=this.asset.supportedFileTypes[0]||"")}closeModal(){this.activeModal.close()}onSizeChange(e){this.selectedSize=e.target.value}onFileTypeChange(e){this.selectedFileType=e.target.value}downloadAsset(){return M(this,null,function*(){if(!this.asset){console.error("Asset is undefined. Cannot download."),this.errorService.setErrorMessage("Cannot download. Asset is not available.");return}this.isLoading=!0;try{yield this.assetService.downloadAsset(this.asset,this.selectedSize,this.selectedFileType),this.closeModal()}catch{this.errorService.setErrorMessage("Download failed. Please try again.")}finally{this.isLoading=!1}})}isSizeSelectDisabled(){return!(this.asset?.supportedSizes?.length&&this.asset.supportedSizes.length>1)}isFileTypeSelectDisabled(){return!(this.asset?.supportedFileTypes?.length&&this.asset.supportedFileTypes.length>1)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=v({type:n,selectors:[["app-asset-modal"]],inputs:{asset:"asset"},outputs:{close:"close"},standalone:!0,features:[z],decls:12,vars:7,consts:[[1,"modal-header"],[3,"isLoading"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"thumbnail-container"],[1,"modal-thumbnail",3,"src","alt"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],["for","size"],["id","size",1,"form-select",3,"change","disabled","ngbTooltip"],[3,"value"],[1,"mt-3"],["for","file-type"],["id","file-type",1,"form-select",3,"change","disabled","ngbTooltip"]],template:function(r,t){r&1&&(o(0,"div",0),x(1,"app-throbber",1),o(2,"h4",2),s(3),i(),o(4,"button",3),c("click",function(){return t.closeModal()}),i()(),o(5,"div",4)(6,"div",5),x(7,"img",6),i(),O(8,V,12,4),i(),o(9,"div",7)(10,"button",8),c("click",function(){return t.downloadAsset()}),s(11,"Download"),i()()),r&2&&(a(),l("isLoading",t.isLoading),a(2),u(t.asset==null?null:t.asset.name),a(4),P("width",t.thumbnailWidth,"%"),l("src",t.asset==null?null:t.asset.url,y)("alt",t.asset==null?null:t.asset.name),a(),w(t.asset?8:-1))},dependencies:[E,D],styles:['.modal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;padding:20px;border:1px solid #888;width:90%;max-width:800px;text-align:center;border-radius:10px}@media (max-width: 480px){.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:10px}}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{margin:20px auto;background-color:#e0e0e0;border:1px solid #cccccc;box-shadow:0 2px 4px #0000001a;padding:10px}@media (max-width: 480px){.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{padding:5px}}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .modal-thumbnail[_ngcontent-%COMP%]{height:auto;width:100%;border:2px solid #cccccc;background-color:#e0e0e0}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#21b7b3;color:#fff;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px;transition:background-color .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#198c89}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;padding:8px;border:1px solid #ccc;background-color:#f9f9f9;font-size:16px;color:#333;margin-top:10px;width:100%;max-width:200px;box-shadow:0 2px 4px #0000001a;appearance:none;background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns%3D%27http://www.w3.org/2000/svg%27 viewBox%3D%270 0 4 5%27%3E%3Cpath fill%3D%27%23000%27 d%3D%27M2 0L0 2h4zM2 5L0 3h4z%27/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;background-size:12px 12px;transition:border-color .3s ease,box-shadow .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#21b7b3;box-shadow:0 0 5px #21b7b380;outline:none}']})}return n})();export{K as AssetModalComponent};
