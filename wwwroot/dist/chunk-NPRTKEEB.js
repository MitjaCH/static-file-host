import{A as s,Aa as A,Ca as D,D as u,Da as F,E as l,F as z,H as b,I as y,K as S,L as O,M as i,N as a,O as c,P as E,Q as p,R as h,S as r,T as f,Y as _,c as P,h as m,j as g,o as M,p as v,q as w,xa as k,y as T}from"./chunk-6EZ6IU4J.js";function V(t,o){t&1&&(i(0,"div",0),c(1,"div",1),a())}var C=class t{isLoading=!1;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-throbber"]],inputs:{isLoading:"isLoading"},standalone:!0,features:[_],decls:1,vars:1,consts:[[1,"spinner-overlay"],[1,"spinner"]],template:function(e,n){e&1&&u(0,V,2,0,"div",0),e&2&&b(n.isLoading?0:-1)},styles:[".spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999}.spinner[_ngcontent-%COMP%]{border:16px solid #f3f3f3;border-top:16px solid #3498db;border-radius:50%;width:120px;height:120px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]})};function j(t,o){if(t&1&&(i(0,"option",11),r(1),a()),t&2){let e=o.$implicit;l("value",e),s(),f(e)}}function B(t,o){if(t&1&&(i(0,"option",11),r(1),a()),t&2){let e=o.$implicit;l("value",e),s(),f(e)}}function H(t,o){if(t&1){let e=E();i(0,"div")(1,"label",9),r(2,"Select size:"),a(),i(3,"select",10),p("change",function(d){M(e);let x=h();return v(x.onSizeChange(d))}),S(4,j,2,2,"option",11,y),a()(),i(6,"div",12)(7,"label",13),r(8,"Select file type:"),a(),i(9,"select",14),p("change",function(d){M(e);let x=h();return v(x.onFileTypeChange(d))}),S(10,B,2,2,"option",11,y),a()()}if(t&2){let e=h();s(3),l("disabled",e.isSizeSelectDisabled())("ngbTooltip",e.isSizeSelectDisabled()?"Only this size is supported":""),s(),O(e.asset.supportedSizes),s(5),l("disabled",e.isFileTypeSelectDisabled())("ngbTooltip",e.isSizeSelectDisabled()?"Only this file type is supported":""),s(),O(e.asset.supportedFileTypes)}}var I=class t{asset;close=new w;thumbnailWidth=30;selectedSize="";selectedFileType="";isLoading=!1;assetService=m(F);activeModal=m(k);errorService=m(D);ngOnInit(){this.asset&&(this.selectedSize=this.asset.supportedSizes[0]||"",this.selectedFileType=this.asset.supportedFileTypes[0]||"")}closeModal(){this.activeModal.close()}onSizeChange(o){this.selectedSize=o.target.value}onFileTypeChange(o){this.selectedFileType=o.target.value}downloadAsset(){return P(this,null,function*(){if(!this.asset){console.error("Asset is undefined. Cannot download."),this.errorService.setErrorMessage("Cannot download. Asset is not available.");return}this.isLoading=!0;try{yield this.assetService.downloadAsset(this.asset,this.selectedSize,this.selectedFileType),this.closeModal()}catch{this.errorService.setErrorMessage("Download failed. Please try again.")}finally{this.isLoading=!1}})}isSizeSelectDisabled(){return!(this.asset?.supportedSizes?.length&&this.asset.supportedSizes.length>1)}isFileTypeSelectDisabled(){return!(this.asset?.supportedFileTypes?.length&&this.asset.supportedFileTypes.length>1)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=g({type:t,selectors:[["app-asset-modal"]],inputs:{asset:"asset"},outputs:{close:"close"},standalone:!0,features:[_],decls:12,vars:7,consts:[[1,"modal-header"],[3,"isLoading"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"thumbnail-container"],[1,"modal-thumbnail",3,"src","alt"],[1,"modal-footer"],[1,"btn","btn-primary",3,"click"],["for","size"],["id","size",1,"form-select",3,"change","disabled","ngbTooltip"],[3,"value"],[1,"mt-3"],["for","file-type"],["id","file-type",1,"form-select",3,"change","disabled","ngbTooltip"]],template:function(e,n){e&1&&(i(0,"div",0),c(1,"app-throbber",1),i(2,"h4",2),r(3),a(),i(4,"button",3),p("click",function(){return n.closeModal()}),a()(),i(5,"div",4)(6,"div",5),c(7,"img",6),a(),u(8,H,12,4),a(),i(9,"div",7)(10,"button",8),p("click",function(){return n.downloadAsset()}),r(11,"Download"),a()()),e&2&&(s(),l("isLoading",n.isLoading),s(2),f(n.asset==null?null:n.asset.name),s(4),z("width",n.thumbnailWidth,"%"),l("src",n.asset==null?null:n.asset.url,T)("alt",n.asset==null?null:n.asset.name),s(),b(n.asset?8:-1))},dependencies:[A,C],styles:['.modal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0006}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{background-color:#fefefe;padding:20px;border:1px solid #888;width:90%;max-width:800px;text-align:center;border-radius:10px}@media (max-width: 480px){.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{padding:10px}}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700;cursor:pointer}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover, .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:focus{color:#000;text-decoration:none}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{margin:20px auto;background-color:#e0e0e0;border:1px solid #cccccc;box-shadow:0 2px 4px #0000001a;padding:10px}@media (max-width: 480px){.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]{padding:5px}}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   .thumbnail-container[_ngcontent-%COMP%]   .modal-thumbnail[_ngcontent-%COMP%]{height:auto;width:100%;border:2px solid #cccccc;background-color:#e0e0e0}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#21b7b3;color:#fff;border:none;padding:10px 20px;font-size:16px;cursor:pointer;border-radius:5px;transition:background-color .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#198c89}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;padding:8px;border:1px solid #ccc;background-color:#f9f9f9;font-size:16px;color:#333;margin-top:10px;width:100%;max-width:200px;box-shadow:0 2px 4px #0000001a;appearance:none;background-image:url("data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns%3D%27http://www.w3.org/2000/svg%27 viewBox%3D%270 0 4 5%27%3E%3Cpath fill%3D%27%23000%27 d%3D%27M2 0L0 2h4zM2 5L0 3h4z%27/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;background-size:12px 12px;transition:border-color .3s ease,box-shadow .3s ease}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#21b7b3;box-shadow:0 0 5px #21b7b380;outline:none}']})};export{I as AssetModalComponent};
